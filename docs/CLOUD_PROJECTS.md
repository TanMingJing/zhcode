# ZhCode IDE - 云端项目和导出功能

## 🌐 云端项目同步

### 功能介绍

你现在可以将 ZhCode 项目保存到云端（Appwrite），并像管理 GitHub 仓库一样管理它们。

### 云端项目特点

✅ **保存项目到云端** - 所有文件和代码保存在 Appwrite  
✅ **加载项目** - 从云端恢复完整项目  
✅ **删除项目** - 删除不需要的项目  
✅ **项目版本控制** - 记录创建和更新时间  
✅ **多文件支持** - 保存整个项目的所有文件  
✅ **项目信息** - 项目名称和描述  

### 使用流程

#### 1️⃣ **保存项目到云端**

```
1. 编写代码和编辑文件
2. 点击头部 ☁️ 按钮打开"云端项目"
3. 输入项目名称（必需）
4. 输入项目描述（可选）
5. 点击"保存当前项目到云端"
6. ✅ 项目已保存
```

#### 2️⃣ **查看云端项目**

```
1. 点击头部 ☁️ 按钮
2. 所有已保存项目显示列表
3. 每个项目显示：
   - 项目名称
   - 项目描述
   - 文件数量
   - 最后修改时间
```

#### 3️⃣ **加载项目**

```
1. 点击头部 ☁️ 按钮
2. 找到要加载的项目
3. 点击"加载"按钮
4. ✅ 项目加载到编辑器
5. 可以继续编辑或修改
```

#### 4️⃣ **删除项目**

```
1. 点击头部 ☁️ 按钮
2. 找到要删除的项目
3. 点击"删除"按钮
4. 确认删除
5. ✅ 项目已删除
```

---

## 💾 导出功能

### 导出代码

#### 导出为 JavaScript

```
1. 编写 ZhCode 代码
2. 点击头部 ⬇️ 按钮
3. 代码自动转译为 JavaScript
4. 文件自动下载为 .js 格式
```

**示例：**
```zhcode
函数 加法(a, b) {
  返回 a + b
}
```

转译为：
```javascript
function 加法(a, b) {
  return a + b;
}
```

#### 导出整个项目

```
1. 编辑完项目
2. 输入项目名称
3. 点击"保存当前项目到云端"
4. 项目保存到 Appwrite
5. 或手动导出为 .zhcode.json 格式
```

---

## 🔄 工作流程示例

### 场景 1: 从零开始创建项目

```
1. 打开 ZhCode IDE
2. 新建文件（或在 main.zhc 中编码）
3. 编写中文代码
4. 保存项目到云端
   ☁️ → 输入"我的计算器" → 保存
5. 导出为 JavaScript
   ⬇️ → 文件下载
6. 在其他项目中使用 JS 代码
```

### 场景 2: 管理多个项目

```
1. 打开项目 A
2. 编辑并保存到云端
3. 打开云端项目面板
4. 选择加载项目 B
5. 编辑项目 B
6. 保存项目 B 到云端
7. 可随时在两个项目间切换
```

### 场景 3: 备份和恢复

```
1. 定期将项目保存到云端
2. 若本地文件丢失
3. 点击 ☁️ → 加载项目
4. 项目完全恢复
```

---

## 📊 云端项目结构

每个云端项目保存以下信息：

```json
{
  "projectName": "我的计算器",
  "description": "一个简单的计算器应用",
  "files": {
    "main.zhc": "函数代码...",
    "utils.zhc": "工具函数..."
  },
  "mainFile": "main.zhc",
  "language": "zh",
  "userId": "user123",
  "createdAt": "2025-12-16T10:00:00Z",
  "updatedAt": "2025-12-16T12:00:00Z"
}
```

---

## 🚀 键盘快捷键

| 快捷键 | 功能 |
|--------|------|
| Ctrl+Z | 撤销编辑 |
| Ctrl+Y | 重做编辑 |
| 🕐 按钮 | 重置文件 |
| 📖 按钮 | AI 历史 |
| ☁️ 按钮 | 云端项目 |
| ⬇️ 按钮 | 导出代码 |
| ▶️ 按钮 | 运行代码 |

---

## 💡 使用技巧

### 1. 有效的项目名称

```
✅ 推荐：
- 我的计算器
- React 组件库
- 数据处理脚本
- 教学案例

❌ 避免：
- 项目
- test
- aaa
- (空值)
```

### 2. 项目描述

```
最佳实践：
- 简洁明了
- 说明项目用途
- 记录主要功能
- 标记项目状态（草稿/完成/归档）
```

### 3. 导出工作流

```
推荐流程：
1. 本地测试代码
2. 运行编译验证
3. 保存到云端（备份）
4. 导出为 JavaScript
5. 集成到其他项目
```

---

## ⚠️ 注意事项

### 云端存储限制

- ⚠️ 需要有效的 Appwrite 配置
- ⚠️ 项目大小取决于 Appwrite 配置
- ⚠️ 默认用户 ID 为 "default_user"

### 导出注意

- ⚠️ 导出为 JavaScript 需要 @zhcode/core 编译器
- ⚠️ 某些高级特性可能不支持转译
- ⚠️ 转译后的代码需要测试

### 版本控制

- ⚠️ 云端项目无自动版本控制
- ⚠️ 推荐定期导出备份
- ⚠️ 重要项目建议同时使用 GitHub

---

## 🔐 数据安全

- ✅ 所有项目数据加密存储
- ✅ 支持自托管 Appwrite
- ✅ 所有者完全控制项目
- ✅ 可设置项目公开/私有

---

## 🔧 故障排除

### 无法保存项目

**问题**: 点击保存无反应  
**解决**:
1. 检查项目名称是否为空
2. 检查 Appwrite 连接
3. 查看浏览器控制台错误

### 导出文件为空

**问题**: 下载的 JS 文件是空的  
**解决**:
1. 检查代码是否为有效 ZhCode
2. 检查 @zhcode/core 是否加载
3. 查看浏览器控制台错误

### 加载项目失败

**问题**: 加载项目后代码消失  
**解决**:
1. 检查项目文件是否完整
2. 刷新页面重试
3. 查看 Appwrite 项目是否删除

---

## 📚 更多信息

- [Appwrite 设置](./APPWRITE_SETUP.md)
- [AI 操作历史](./AI_HISTORY.md)
- [ZhCode 文档](../docs/context.md)
